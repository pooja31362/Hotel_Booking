<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Hotel Booking | Home</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <script>
    // Autocomplete script
    async function fetchSuggestions(query) {
      const res = await fetch(`/suggest?q=${query}`);
      const data = await res.json();
      const list = document.getElementById('suggestions');
      list.innerHTML = '';
      data.forEach(item => {
        const li = document.createElement('li');
        li.className = "px-3 py-1 hover:bg-gray-200 cursor-pointer";
        li.textContent = item;
        li.onclick = () => {
          document.getElementById('searchbox').value = item;
          list.innerHTML = '';
        };
        list.appendChild(li);
      });
    }
  </script>
</head>
<body class="bg-gray-100">
  <!-- Nav -->
  <nav class="bg-white shadow p-4 flex justify-between items-center">
    <div class="text-xl font-bold">üè® HotelEase</div>
    <div class="space-x-4 hidden md:flex">
      {% for city in cities %}
        <a href="{{ url_for('main.hotel_list', city=city) }}" class="text-gray-700 hover:text-blue-600">{{ city }}</a>
      {% endfor %}
    </div>
    <a href="/login" class="text-sm text-blue-500 hover:underline">Login / Signup</a>
  </nav>

  <!-- Hero -->
  <section class="text-center bg-cover bg-center text-white py-20" style="background-image: url('/static/hero.jpg')">
    <h1 class="text-4xl font-bold">174,000+ Hotels Across 35+ Countries</h1>
    <form action="{{ url_for('main.hotel_list') }}" method="get" class="mt-10 flex flex-wrap justify-center gap-4 max-w-4xl mx-auto">
      <div class="relative w-full md:w-1/3">
        <input id="searchbox" name="location" class="w-full px-4 py-2 rounded shadow" placeholder="Search city, hotel, or neighborhood" oninput="fetchSuggestions(this.value)">
        <ul id="suggestions" class="absolute bg-white text-black w-full mt-1 rounded shadow z-10"></ul>
      </div>
      <input type="date" name="check_in" class="px-4 py-2 rounded w-40">
      <input type="date" name="check_out" class="px-4 py-2 rounded w-40">
      <select name="guests" class="px-4 py-2 rounded w-32">
        {% for i in range(1, 5) %}
          <option value="{{ i }}">{{ i }} Guest{% if i > 1 %}s{% endif %}</option>
        {% endfor %}
      </select>
      <button class="bg-green-600 hover:bg-green-700 text-white px-6 py-2 rounded">Search</button>
    </form>
  </section>

  <!-- Promo -->
  <section class="text-center my-10">
    <h2 class="text-2xl font-bold">Planned your summer trip?</h2>
    <p class="text-gray-600 mt-2">Use code <strong>SUMMER75</strong> & save up to 75%</p>
    <img src="{{ url_for('static', filename='promo.png') }}" alt="QR Code" class="mx-auto my-4 w-40">
    <a href="#" class="bg-blue-600 text-white px-6 py-2 rounded">Book Now</a>
  </section>
</body>
</html>
